<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"  
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="eventSQL">

	<insert id="eventWrite" parameterType="java.util.Map" >
		<choose>
		<when test='isPeriodOn == "0"'>
			insert into event values(#{subject},to_date(#{startDate},'yyyy-MM-dd HH24:mi'),to_date(#{endDate},'yyyy-MM-dd HH24:mi'),sysdate,#{productCode},#{eventStatus},SEQ_EVENT.nextval)
		</when>
		<otherwise>
			insert into event values(#{subject},sysdate,#{productCode},#{eventStatus},SEQ_EVENT.nextval)
		</otherwise>
		</choose>
	</insert>

	<select id="getEventList" parameterType="java.util.Map" resultType="event">
		<![CDATA[
			select * from (select rownum rn, tt.* from
		 (select * from event order by seq desc) tt) where rn >= #{startNum} and rn<= #{endNum}
		]]>  
	</select>

	<select id="getTotalEvent" resultType="Integer">
		select count(*) from event
	</select>

	<delete id="eventDelete" parameterType="java.util.Map">
		delete event where seq in 
		<foreach collection="array" item="seq" index="i" open="(" separator="," close=")">
			#{seq}
		</foreach>
	</delete>

	<!-- 

	<select id="faqCategorySearchList" parameterType="java.util.Map" resultType="faqBoard">
		<![CDATA[
		select * from (select rownum rn, tt.* from
		 (select * from faqboard
		 ]]> 
		 
		<if test='category != 9'>
			<![CDATA[
				where category like #{category} order by seq desc) tt) where rn >= #{startNum} and rn <= #{endNum}
			]]>  
		</if>
		<if test='category == 9'>
			<![CDATA[
				order by seq desc) tt) where rn >= #{startNum} and rn <= #{endNum}
			]]> 
		</if>
	</select>
	

	<select id="getFAQCategoryTotalArticle" parameterType="java.util.Map" resultType="Integer">
		<if test='category != 9'>
			select count(*) from faqboard where category like #{category}
		</if>
		<if test='category == 9'>
			select count(*) from faqboard
		</if>
	</select>
	
	

	<select id="faqBoardSearch" parameterType="java.util.Map" resultType="faqBoard">
	 	<if test='searchOption == null and category == 9'>
			<![CDATA[
				select * from (select rownum rn, tt.* from (select * from faqboard where subject like '%'||#{keyword}||'%' order by seq desc) tt) where rn >= #{startNum} and rn <= #{endNum}
			]]> 
		</if>
		<if test='searchOption == null and category != 9'>
			<![CDATA[
				select * from (select rownum rn, tt.* from (select * from faqboard where subject like '%'||#{keyword}||'%' and category like #{category} order by seq desc) tt) where rn >= #{startNum} and rn <= #{endNum}
			]]> 
		</if>

		<if test='searchOption != null and category == 9'>
			<![CDATA[
				select * from (select rownum rn, tt.* from (select * from faqboard where #{searchOption} like '%'||#{keyword}||'%' order by seq desc) tt) where rn >= #{startNum} and rn <= #{endNum}
			]]> 
		</if>
		<if test='searchOption != null and category != 9'>
			<![CDATA[
				select * from (select rownum rn, tt.* from (select * from faqboard where #{searchOption} like '%'||#{keyword}||'%' and category like #{category} order by seq desc) tt) where rn >= #{startNum} and rn <= #{endNum}
			]]> 
		</if>
	</select>
	

	<select id="getSearchTotalArticle" parameterType="java.util.Map" resultType="Integer">
		<if test='searchOption == null and category == 9'>
			select count(*) from faqboard where subject like '%'||#{keyword}||'%'
		</if>
		<if test='searchOption == null and category != 9'>
			select count(*) from faqboard where subject like '%'||#{keyword}||'%' and category like #{category}
		</if>
		<if test='searchOption != null and category == 9'>
			select count(*) from faqboard where #{searchOption} like '%'||#{keyword}||'%'
		</if>
		<if test='searchOption != null and category != 9'>
			select count(*) from faqboard where category like #{category} and #{searchOption} like '%'||#{keyword}||'%'
		</if>
	</select>
	
	
	

		
	

	<select id="getFAQArticle" parameterType="Integer" resultType="faqBoard">
		select * from faqboard where seq=#{seq}
	</select>
	
	

	<update id="faqModify" parameterType="java.util.Map">
		update faqboard set subject=#{subject}, content=#{content}, logtime=sysdate where seq=#{seq}
	</update>
	-->
</mapper>